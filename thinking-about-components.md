# 组件封装的思考

## 前言

在小程序开发的早期，是没有 **自定义组件(component)**，仅有 **自定义模板(template)** 的。最早接触到组件开发还是在使用 `React`、`Vue` 框架的时候，熟悉以上两个框架的读者，对小程序的组件应该会有熟悉的感觉，机制和写法差不多

## 为什么要有组件？

对于这个问题，很多人的第一反应也许是：代码复用

的确，代码复用是组件的核心职责，但它还有更大的使命：性能

因为通过组件封装，可以将页面拆分成多个组件，因此较大粒度的页面就被拆分成粒度较小的组件。当一些数据发生变更导致页面变化时，就只需要重新渲染包含该数据的组件即可，而不用渲染整个页面，从而达到了提高渲染性能的效果

![](images/components/components-graph.png)

## 生命周期

在 `Vue` 中，每个页面是一个 `Vue` 实例，而组件又是可复用的 `Vue` 实例，因此可以理解成，页面和组件是同样的生命周期

而小程序就将页面和组件拆分成两个类：`Page` 和 `Component`，因此接收的生命周期函数也是不一样的。比如，`Page` 接收的是：`onLoad`、`onShow`、`onReady`等函数，而 `Component` 则接收 `created`、`attached`、`ready` 等函数

> 命名风格都不一致，真是让人头大

## 数据传递

